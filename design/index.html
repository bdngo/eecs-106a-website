<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Design | EECS 106A Final Project</title><meta name=keywords content><meta name=description content="Hardware Design A large part of our project lies in the mechanical design of our underwater system. Several key categories for functional requirements include:
Waterproof: The design must be capable of prolonged submersion in water without operational failure. Locomotion: the design must be capable of dexterous swimming, consisting of both straight and turning maneuvers. Reliability: the system must be relatively simple to fix, maintain, and debug. The design should be highly modular and adaptable for future changes."><meta name=author content="Stanley Wang, Bryan Ngo, Shaikh Shamsuddin, Khalid Durani, Eric Yang"><link rel=canonical href=http://bdngo.github.io/eecs-106a-website/design/><link crossorigin=anonymous href=/eecs-106a-website/assets/css/stylesheet.20938765b1a704f13e3850663233999bf875f2b80884c6a144ccb321e865b540.css integrity="sha256-IJOHZbGnBPE+OFBmMjOZm/h18rgIhMahRMyzIehltUA=" rel="preload stylesheet" as=style><link rel=icon href=http://bdngo.github.io/eecs-106a-website/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://bdngo.github.io/eecs-106a-website/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://bdngo.github.io/eecs-106a-website/favicon-32x32.png><link rel=apple-touch-icon href=http://bdngo.github.io/eecs-106a-website/apple-touch-icon.png><link rel=mask-icon href=http://bdngo.github.io/eecs-106a-website/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=http://bdngo.github.io/eecs-106a-website/design/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Design"><meta property="og:description" content="Trajectory Control of a Bio-Inspired Soft Robot for Underwater Manipulation"><meta property="og:type" content="website"><meta property="og:url" content="http://bdngo.github.io/eecs-106a-website/design/"><meta property="og:site_name" content="FishBot"><meta name=twitter:card content="summary"><meta name=twitter:title content="Design"><meta name=twitter:description content="Trajectory Control of a Bio-Inspired Soft Robot for Underwater Manipulation"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Design","item":"http://bdngo.github.io/eecs-106a-website/design/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://bdngo.github.io/eecs-106a-website/ accesskey=h title="EECS 106A Final Project (Alt + H)">EECS 106A Final Project</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://bdngo.github.io/eecs-106a-website/introduction/ title=Introduction><span>Introduction</span></a></li><li><a href=http://bdngo.github.io/eecs-106a-website/design/ title=Design><span class=active>Design</span></a></li><li><a href=http://bdngo.github.io/eecs-106a-website/implementation/ title=Implementation><span>Implementation</span></a></li><li><a href=http://bdngo.github.io/eecs-106a-website/results/ title=Results><span>Results</span></a></li><li><a href=http://bdngo.github.io/eecs-106a-website/conclusion/ title=Conclusion><span>Conclusion</span></a></li><li><a href=http://bdngo.github.io/eecs-106a-website/team/ title=Team><span>Team</span></a></li><li><a href=http://bdngo.github.io/eecs-106a-website/additional-materials/ title="Additional Materials"><span>Additional Materials</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=http://bdngo.github.io/eecs-106a-website/>Home</a></div><h1>Design</h1></header><div class=post-content><h1 id=hardware-design>Hardware Design<a hidden class=anchor aria-hidden=true href=#hardware-design>#</a></h1><p>A large part of our project lies in the mechanical design of our underwater system. Several key categories for functional requirements include:</p><ul><li><strong>Waterproof</strong>: The design must be capable of prolonged submersion in water without operational failure.</li><li><strong>Locomotion</strong>: the design must be capable of dexterous swimming, consisting of both straight and turning maneuvers.</li><li><strong>Reliability</strong>: the system must be relatively simple to fix, maintain, and debug. The design should be highly modular and adaptable for future changes.</li></ul><figure><img loading=lazy src=../img/tail-design.png width=100% height=100%><figcaption>FishBot hardware design features</figcaption></figure><p>The hardware for our fish robot is largely based on a prior platform developed by Wang (me, Stanley!) et al.
We explore a robot with an underactuated tail consisting of 5 linkage segments actuated by a single cable drive, with a soft silicone sleeve for underwater propulsion.
However, our iteration consists of several notable improvements over the previous design.
Specifically, we make a large leap toward designing a tetherless and semi-autonomous robotic system.
From a hardware perspective, several key design choices are made:</p><ul><li><strong>Actuator</strong>: A waterproof servo is utilized to avoid complex waterproofing of moving components.
The primary tradeoff with this is<ol><li>expensive parts (these servos are $50+ each)</li><li>limited selection of servomotors available</li></ol></li></ul><p>Both drive speed and torque are important considerations here since the tail mechanism requires an adequate driving force and must bend at a high rate.</p><ul><li><strong>Electronics</strong>: The primary control and power electronics (LiPo battery, microcontroller, etc.) must all be housed inside the system underwater to avoid an external tether.
This necessitates the design of a waterproof enclosure.
The tradeoff here is primarily the additional weight added from these components, which have a substantial impact on the buoyancy and balance of our robot.</li><li><strong>Communications</strong>: Wireless communication is necessary in order to connect our robot with our computer ROS system.
This is implemented using an HTTP server with our microcontroller.
The microcontroller is attached to the flotation device of the robot to ensure the antenna is not submerged, since WiFi does not travel well through the air-water interface.
The tradeoff here lies in the additional layer of complexity, which introduces another potential point of failure in the system.</li></ul><p>From a realistic engineering perspective, our design choices lead to several advantageous and disadvantageous outcomes:</p><ul><li>The waterproofing of the system is highly <strong>robust</strong> due to the use of a waterproof servo and well-designed enclosure. Minimal leakage is observed even after extended submersion in water for more than 60 minutes.</li><li>The <strong>durability and safety</strong> of the system is extremely high.
There are no dangerous parts due to the intrinsic nature of the soft robot. Our robot has also survived severe drops onto the concrete lab floor without any damage.</li><li>The <strong>efficiency</strong> of our system is not optimal for realistic marine deployment. The extremely small battery used for our microcontroller must be recharged frequently for prolonged use.</li></ul><figure><img loading=lazy src=../img/system-design.png width=100% height=100%><figcaption>Overall ROS + Arduino system design of FishBot</figcaption></figure><figure><img loading=lazy src=../img/motion-planning.png width=100% height=100%><figcaption>Theoretical path planning of FishBot</figcaption></figure><h1 id=software-design>Software Design<a hidden class=anchor aria-hidden=true href=#software-design>#</a></h1><p>Much of our project relies on a fully-functioning software interface that can perform the majority of the control and planning computations, and communicate with the FishBot.
In particular, we must be able to interface with a USB camera, perform planning computations based on the data, and reliably send and recieve wireless control messages over a local network.</p><ul><li><p><strong>Modularity</strong>: The structure of the software needs to be modular such that segments of the code base can be reused/repurposed for other use.
To do so, we will need to separate the various responsibilities of the software into different files and functions that can serve multiple purposes.
This also helps provide abstractions between the different components of the software, making testing and debugging much easier.
Generally, this is good software practice so that future iterations of the design can reuse the prior code implementions.</p></li><li><p><strong>Goals</strong>: We want to handle the control, motion planning, and use of the servo motor through the software.
In order to do so, we will be utilizing ROS to separate these responsibilities into individual nodes and ensuring that we are writing modular code.</p></li><li><p><strong>Design Decisions and Tradeoffs</strong>: An implication that we faced during the software design was creating a reliable connection between ROS and the ESP32.
As the FishBot is working in a underwater enviornment, we decided to implement a web server that can take the outputs from ROS and provide them to the ESP32.
Using a wireless communication method allows us to remove an external force on the FishBot and allows for more freedom of movement for the FishBot.
The tradeoff here is that the python server is not completely stable where the server has to be reloaded during test cycles since it would get stuck and crash.
Another tradeoff we made was running ROS on a host computer rather than on the FishBot itself. This was due to us not being able to obtain a Rasberry Pi as a result of the microcontroller shortage.
While running ROS on a host computer allowed us to move forward with using ROS to control the FishBot, it required us to have to feed wireless signals into an underwater robot using an ESP32.
This is not ideal as communicating with underwater robots has always been a challenge and this adds latency between the outputs of ROS and the microcontroller using that output to control the servo motor.
We couldn&rsquo;t run ROS using an ESP32 as the ESP32 is not compatible with ROS1, and ROS2 has a learning curve that we did not have the time to overcome.</p></li></ul></div></main><footer class=footer><span>&copy; 2022 <a href=http://bdngo.github.io/eecs-106a-website/>EECS 106A Final Project</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>